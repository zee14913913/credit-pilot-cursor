# 🚀 CreditPilot 部署方案说明

## ⚠️ 关于 Vercel

**Vercel 不太适合这个系统，原因：**

1. **Vercel 是 Serverless 平台**
   - 函数有执行时间限制（最多10秒）
   - 不适合长时间运行的后端服务
   - 定时任务（每晚10点）很难实现

2. **数据库问题**
   - SQLite 文件在 serverless 环境中会丢失
   - 需要外部数据库（PostgreSQL）

3. **文件存储问题**
   - 上传的PDF和单据文件无法持久保存
   - 需要外部存储（S3等）

---

## ✅ 推荐的部署方案

### 方案1：Railway（推荐）⭐

**优势：**
- ✅ 完全免费（有免费额度）
- ✅ 支持 PostgreSQL 数据库
- ✅ 支持文件存储
- ✅ 可以运行定时任务
- ✅ 自动生成域名（如：creditpilot.railway.app）
- ✅ 部署简单

**费用：** 免费（每月$5额度，通常够用）

**部署步骤：**
1. 注册 Railway 账号
2. 连接 GitHub 仓库
3. 一键部署
4. 自动获得域名

---

### 方案2：Render

**优势：**
- ✅ 免费套餐可用
- ✅ 支持 PostgreSQL
- ✅ 支持定时任务（Cron Jobs）
- ✅ 自动生成域名

**费用：** 免费（有限制，但够用）

---

### 方案3：Fly.io

**优势：**
- ✅ 免费套餐
- ✅ 全球部署
- ✅ 支持持久化存储

**费用：** 免费（有额度限制）

---

### 方案4：DigitalOcean App Platform

**优势：**
- ✅ 稳定可靠
- ✅ 支持数据库和存储
- ✅ 专业服务

**费用：** 约 $5-12/月

---

## 🎯 推荐：Railway（最简单）

**为什么推荐 Railway：**
1. **完全免费**（有免费额度，通常够用）
2. **部署超简单**（连接GitHub，一键部署）
3. **自动配置**（数据库、域名都自动配置）
4. **支持定时任务**（可以用他们的 Cron Jobs）
5. **有像样的域名**（creditpilot.railway.app）

---

## 📋 部署到 Railway 的步骤

### 第一步：准备代码

1. **创建 GitHub 仓库**（如果还没有）
2. **推送代码到 GitHub**

### 第二步：在 Railway 部署

1. **访问：** https://railway.app
2. **注册账号**（可以用GitHub登录）
3. **点击 "New Project"**
4. **选择 "Deploy from GitHub repo"**
5. **选择你的仓库**
6. **Railway 会自动：**
   - 检测到 Python 项目
   - 安装依赖
   - 启动服务
   - 生成域名

### 第三步：配置环境变量

在 Railway 项目设置中添加：
```
SENDER_EMAIL=business@infinite-gz.com
SENDER_PASSWORD=gracgnrwghbeocox
RECIPIENT_EMAIL=wang041396@gmail.com
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
DATABASE_URL=postgresql://...（Railway会自动提供）
```

### 第四步：配置定时任务

Railway 支持 Cron Jobs，可以设置每晚10点执行提醒任务。

---

## 🔧 需要修改的代码

部署到云平台需要做一些调整：

1. **数据库：** 从 SQLite 改为 PostgreSQL
2. **文件存储：** 使用云存储（Railway 的 Volume 或 S3）
3. **定时任务：** 使用 Railway 的 Cron Jobs

---

## 💡 如果坚持用 Vercel

如果一定要用 Vercel，可以：

1. **前端部署在 Vercel**（如果以后有前端）
2. **后端部署在其他平台**（Railway/Render）
3. **通过 API 连接**

但这样会比较复杂，不如直接用 Railway。

---

## 🎯 我的建议

**推荐用 Railway：**
- ✅ 免费
- ✅ 简单
- ✅ 有像样的域名
- ✅ 支持所有功能
- ✅ 可以运行定时任务

**需要我帮你准备部署文件吗？**

我可以：
1. 创建 Railway 部署配置
2. 修改代码适配云平台
3. 准备部署文档

告诉我你想用哪个平台，我帮你准备！🚀
