[phases.setup]
# 使用 Python 3.11；pip 随 python 自带，无需单独声明
nixPkgs = ["python311"]

[phases.install]
cmds = [
  # 使用 python3 -m pip，避免找不到 pip 可执行文件
  "cd backend && python3 -m pip install -r requirements.txt"
]

[phases.build]
cmds = [
  "cd backend && python3 init_db.py || true"
]

[start]
cmd = "cd backend && bash start.sh"
