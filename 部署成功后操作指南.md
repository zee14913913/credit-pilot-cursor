# CreditPilot 部署成功后操作指南

**系统**：CreditPilot 信用卡账单管理系统  
**部署平台**：Railway  
**更新日期**：2025-12-10

---

## 🎉 恭喜！系统已成功部署

现在你的 CreditPilot 系统已经在 Railway 上运行了。接下来你需要做什么？

---

## 第一步：验证系统运行

### 1.1 检查部署状态

**在 Railway 控制台**：
1. 进入 **Web 服务** → **Deployments**
2. 确认最新部署状态为 **"Active"** ✅
3. 查看部署日志，确认无错误

**预期日志**：
```
============================================================
CreditPilot 启动中...
============================================================
✅ DATABASE_URL 已设置
============================================================
初始化数据库...
============================================================
✅ 数据库表创建成功
✅ 数据库初始化完成
============================================================
启动API服务器...
============================================================
INFO:     Uvicorn running on http://0.0.0.0:8000
```

### 1.2 测试数据库连接

**在 Web 服务 Shell 中**：
```bash
cd backend && python3 init_db.py
```

**预期结果**：
- ✅ 无错误
- ✅ 显示 "✅ 数据库初始化完成"

### 1.3 测试 Web 服务

**获取公共 URL**：
1. 进入 **Web 服务** → **Networking** → **Public Networking**
2. 复制公共 URL（如：`https://your-app.railway.app`）

**测试健康检查**：
```bash
curl https://your-app.railway.app/health
```

**或访问**：
```
https://your-app.railway.app/health
```

**预期结果**：
- ✅ 返回 `{"status": "healthy"}` 或类似 JSON

### 1.4 访问 API 文档

**访问 Swagger UI**：
```
https://your-app.railway.app/docs
```

**你可以**：
- 查看所有 API 端点
- 测试 API 功能
- 查看请求/响应格式

---

## 第二步：配置和使用系统

### 2.1 导入初始数据（可选）

**如果有 CSV 数据**：
1. 访问 API 文档：`https://your-app.railway.app/docs`
2. 找到 `POST /api/import/csv` 端点
3. 上传 CSV 文件导入数据

**CSV 格式要求**：
- 参考 `CSV导入说明.md`
- 确保列名正确
- 数据格式正确

### 2.2 上传第一个账单

**通过 API**：
1. 访问 `POST /api/statements/upload` 端点
2. 上传 Alliance Bank PDF 账单
3. 系统会自动解析并创建账单记录

**通过前端**（如果已开发）：
- 使用前端界面上传账单

### 2.3 测试提醒系统

**手动触发测试**：
1. 访问 `GET /api/reminders/test` 端点
2. 或等待到 UTC 14:00（马来西亚时间 22:00）
3. 检查收件箱（wang041396@gmail.com）

**预期结果**：
- ✅ 收到邮件
- ✅ 邮件包含 Excel 附件
- ✅ Excel 包含每日报告

---

## 第三步：日常使用

### 3.1 上传账单

**流程**：
1. 收到客户信用卡账单 PDF
2. 通过 API 或前端上传
3. 系统自动解析并分类
4. 验证数据准确性

### 3.2 上传单据

**单据类型**：
- **Statement**：账单 PDF
- **Merchant Slip**：商户收据
- **Payment Receipt**：付款收据
- **Transfer Slip**：转账单

**上传方式**：
- 通过 `POST /api/documents/upload` 端点
- 关联到对应的账单

### 3.3 查看 Dashboard

**访问 Dashboard 统计**：
```
GET /api/dashboard/stats
```

**返回数据**：
- 总账单数
- 已验证账单数
- 总余额（Owner 和 GZ）
- 即将到期账单数

### 3.4 接收每日提醒

**自动提醒**：
- 每天 22:00（马来西亚时间）自动执行
- 发送邮件到 wang041396@gmail.com
- 包含 Excel 日报附件

**邮件内容**：
- 明天到期的账单
- 后天到期的账单
- 待付款总金额
- 最紧急客户

---

## 第四步：监控和维护

### 4.1 日常监控

**每日检查**：
- [ ] Web 服务是否正常运行
- [ ] 数据库连接是否正常
- [ ] Cron 任务是否执行
- [ ] 邮件是否发送

**检查方法**：
1. 访问健康检查端点
2. 查看 Railway 部署日志
3. 检查收件箱

### 4.2 日志查看

**Web 服务日志**：
- Railway → Web 服务 → Deployments → 最新部署 → Logs

**Reminder-Cron 服务日志**：
- Railway → Reminder-Cron 服务 → Deployments → 最新部署 → Logs

### 4.3 数据备份

**定期备份**：
- 使用 Railway 的数据库备份功能
- 或使用 `pg_dump` 手动备份
- 备份 Volume 中的重要文件

---

## 第五步：开发前端（下一步）

### 5.1 前端开发选项

**选项 1：Web 前端**
- React / Vue / Angular
- 响应式设计
- 可以在任何设备访问

**选项 2：iPad 原生 App**
- SwiftUI（如原计划）
- 原生体验
- 离线支持

**选项 3：混合方案**
- Web 前端 + iPad App
- 数据同步
- 多平台支持

### 5.2 API 集成

**API 基础 URL**：
```
https://your-app.railway.app
```

**主要端点**：
- Dashboard：`/api/dashboard/stats`
- 账单：`/api/statements`
- 单据：`/api/documents`
- 提醒：`/api/reminders`

**API 文档**：
```
https://your-app.railway.app/docs
```

---

## 📋 快速参考

### 系统 URL
- **API 文档**：`https://your-app.railway.app/docs`
- **健康检查**：`https://your-app.railway.app/health`
- **Dashboard API**：`https://your-app.railway.app/api/dashboard/stats`

### 重要端点
- 上传账单：`POST /api/statements/upload`
- 获取账单：`GET /api/statements`
- 上传单据：`POST /api/documents/upload`
- 测试提醒：`GET /api/reminders/test`

### 定时任务
- **执行时间**：每天 22:00（马来西亚时间）
- **收件人**：wang041396@gmail.com
- **内容**：Excel 日报 + 提醒信息

---

## ✅ 完成清单

### 部署验证
- [ ] Web 服务正常运行
- [ ] 数据库连接正常
- [ ] API 文档可访问
- [ ] 健康检查通过

### 系统配置
- [ ] 导入初始数据（如需要）
- [ ] 测试上传账单
- [ ] 测试上传单据
- [ ] 测试提醒系统

### 日常使用
- [ ] 了解如何使用系统
- [ ] 设置监控提醒
- [ ] 准备开发前端

---

## 🚀 下一步：开发前端

现在系统后端已经运行，你可以开始开发前端了！

**推荐工具和方案**：
- 查看 `前端设计方案.md` 了解详细的前端开发方案

---

**文档版本**：1.0  
**最后更新**：2025-12-10


