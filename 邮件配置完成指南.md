# 📧 邮件自动发送配置完成指南

## ⚠️ 重要说明

**目前邮件功能代码已经准备好了，但还需要你完成配置才能自动发送！**

---

## 🎯 功能说明

系统支持**每天晚上10点自动发送邮件**到小助理的邮箱：**wang041396@gmail.com**

邮件内容包括：
- 📋 详细的提醒信息（明天和后天到期的账单）
- 📊 Excel日报附件（包含完整数据）

---

## ⚙️ 配置步骤（3步完成）

### 第一步：创建 `.env` 配置文件

```bash
cd /Users/1491-3913zee/Projects/CreditPilot/backend
```

创建 `.env` 文件，添加以下内容：

```env
# 邮件配置
SENDER_EMAIL=你的Gmail邮箱@gmail.com
SENDER_PASSWORD=你的应用专用密码（16位，去掉空格）
RECIPIENT_EMAIL=wang041396@gmail.com
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
```

**示例：**
```env
SENDER_EMAIL=myemail@gmail.com
SENDER_PASSWORD=abcdefghijklmnop
RECIPIENT_EMAIL=wang041396@gmail.com
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
```

### 第二步：获取Gmail应用专用密码

**重要：** Gmail需要"应用专用密码"，不是你的登录密码！

**获取步骤：**

1. 访问：https://myaccount.google.com/
2. 点击"安全性" → "两步验证"（如果没开启，先开启）
3. 在"两步验证"页面最下方，找到"应用专用密码"
4. 点击"生成" → 选择"邮件"和"其他（自定义名称）"
5. 输入名称：`CreditPilot`
6. 复制生成的16位密码（类似：`abcd efgh ijkl mnop`）
7. **去掉空格**，填入 `.env` 文件（例如：`abcdefghijklmnop`）

### 第三步：测试和启动

**测试邮件发送：**
```bash
cd /Users/1491-3913zee/Projects/CreditPilot/backend
source venv/bin/activate
python3 reminder_system.py
```

如果成功，会看到：
```
✓ Excel日报已生成: /path/to/report.xlsx
✓ 邮件已成功发送到: wang041396@gmail.com
```

**启动定时任务（每晚10点自动发送）：**
```bash
cd /Users/1491-3913zee/Projects/CreditPilot/backend
source venv/bin/activate
python3 -c "from reminder_system import setup_scheduler; setup_scheduler()"
```

---

## ✅ 配置完成后

系统会**每天晚上10点自动**：
1. ✅ 生成提醒数据
2. ✅ 生成Excel日报
3. ✅ 发送邮件到 **wang041396@gmail.com**

---

## ❓ 常见问题

### Q: 现在会自动发送吗？

**A: 不会。** 需要先完成配置（创建 `.env` 文件，设置邮箱和密码）。

### Q: 配置完成后，需要一直开着电脑吗？

**A: 是的。** 定时任务需要服务器一直运行。

**解决方案：**
- 使用云服务器（24小时运行）
- 或者每天早上手动运行一次：`python3 reminder_system.py`

### Q: 可以测试发送吗？

**A: 可以！** 运行 `python3 reminder_system.py` 会立即发送一次测试邮件。

---

## 📝 快速配置模板

创建文件：`/Users/1491-3913zee/Projects/CreditPilot/backend/.env`

```env
SENDER_EMAIL=你的邮箱@gmail.com
SENDER_PASSWORD=你的16位应用专用密码（去掉空格）
RECIPIENT_EMAIL=wang041396@gmail.com
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
```

---

**配置完成后，系统就会每天晚上10点自动发送提醒邮件到 wang041396@gmail.com 了！** 📧✨
