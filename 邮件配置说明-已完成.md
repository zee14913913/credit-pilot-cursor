# 📧 邮件配置说明 - 已完成

## ✅ 配置文件已创建

我已经为你创建了 `.env` 配置文件，邮箱地址已设置为：
- **发件人：** business@infinite-gz.com
- **收件人：** wang041396@gmail.com

---

## ⚠️ 还需要你完成的步骤

### 第一步：设置邮箱密码

打开文件：`/Users/1491-3913zee/Projects/CreditPilot/backend/.env`

找到这一行：
```
SENDER_PASSWORD=请在这里填入你的邮箱密码或应用专用密码
```

**替换为你的实际密码：**

#### 如果是Gmail邮箱：
- 需要使用"应用专用密码"（不是登录密码）
- 获取方法：https://myaccount.google.com/ → 安全性 → 两步验证 → 应用专用密码

#### 如果是企业邮箱（infinite-gz.com）：
- 使用你的邮箱登录密码
- 可能需要联系IT部门确认SMTP设置

### 第二步：确认SMTP设置

**如果是Gmail邮箱：**
```env
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
```

**如果是企业邮箱（infinite-gz.com）：**
可能需要修改为：
```env
SMTP_SERVER=smtp.infinite-gz.com  # 或 smtp.gmail.com（如果使用Google Workspace）
SMTP_PORT=587  # 或 465（SSL）
```

**不确定的话，可以：**
1. 先尝试当前的Gmail设置
2. 如果失败，联系IT部门获取正确的SMTP设置

---

## 🧪 测试邮件发送

配置完成后，测试一下：

```bash
cd /Users/1491-3913zee/Projects/CreditPilot/backend
source venv/bin/activate
python3 reminder_system.py
```

**如果成功，会看到：**
```
✓ Excel日报已生成: /path/to/report.xlsx
✓ 邮件已成功发送到: wang041396@gmail.com
```

**如果失败，会看到错误信息，根据错误信息调整配置。**

---

## 🚀 启动定时任务（每晚10点自动发送）

配置并测试成功后，启动定时任务：

```bash
cd /Users/1491-3913zee/Projects/CreditPilot/backend
source venv/bin/activate
python3 -c "from reminder_system import setup_scheduler; setup_scheduler()"
```

这个命令会一直运行，**每天晚上10点自动发送邮件**。

---

## 📧 邮件内容

每天晚上10点，系统会自动发送邮件到 **wang041396@gmail.com**，包含：

1. **邮件正文：** 详细的提醒信息
   - 明天到期的账单
   - 后天到期的账单
   - 总计金额
   - 最紧急客户

2. **Excel附件：** `CreditPilot_Daily_Report_YYYYMMDD.xlsx`
   - 包含完整的账单数据

---

## ❓ 常见问题

### Q1: 密码填什么？

**A:** 
- **Gmail邮箱：** 使用"应用专用密码"（16位，去掉空格）
- **企业邮箱：** 使用你的邮箱登录密码

### Q2: SMTP设置不对怎么办？

**A:** 
- 如果是企业邮箱，可能需要联系IT部门获取正确的SMTP服务器地址
- 如果是Google Workspace（企业版Gmail），通常也是 `smtp.gmail.com:587`

### Q3: 测试失败怎么办？

**A:** 
- 检查密码是否正确
- 检查SMTP服务器和端口是否正确
- 查看错误信息，根据提示调整

### Q4: 需要一直开着电脑吗？

**A:** 
- 是的，定时任务需要服务器一直运行
- 如果电脑关机，就不会自动发送
- 可以使用云服务器，或者每天早上手动运行一次

---

## ✅ 配置检查清单

- [x] ✅ `.env` 文件已创建
- [x] ✅ 发件人邮箱已设置：business@infinite-gz.com
- [x] ✅ 收件人邮箱已设置：wang041396@gmail.com
- [ ] ⏳ **需要你设置：** SENDER_PASSWORD（邮箱密码）
- [ ] ⏳ **需要你确认：** SMTP设置是否正确
- [ ] ⏳ **需要你测试：** 运行 `python3 reminder_system.py` 测试发送
- [ ] ⏳ **需要你启动：** 定时任务（如果测试成功）

---

## 📝 当前配置文件位置

`/Users/1491-3913zee/Projects/CreditPilot/backend/.env`

**文件内容：**
```env
SENDER_EMAIL=business@infinite-gz.com
SENDER_PASSWORD=请在这里填入你的邮箱密码或应用专用密码
RECIPIENT_EMAIL=wang041396@gmail.com
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
```

---

**完成密码设置后，就可以测试和启动自动发送了！** 📧✨
