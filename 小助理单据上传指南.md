# 📎 小助理单据上传指南

## ✅ 功能已实现！

小助理现在可以上传以下单据：

1. **Merchant Receipt（刷卡收据）** - 客户刷卡消费的收据
2. **Payment Receipt（付款单）** - 客户付款的收据
3. **Transfer Slip（转账单）** - 银行转账的单据

---

## 🚀 如何使用（最简单的方法）

### 第一步：打开浏览器

访问：**http://localhost:8000/docs**

你会看到一个API文档页面。

### 第二步：找到单据上传功能

在页面上找到：**`POST /api/documents/upload`**

### 第三步：上传单据

1. **点击 "Try it out"**（试试看）

2. **填写参数：**
   - **file**: 点击 "Choose File"，选择单据图片或PDF
     - 支持格式：JPG, PNG, PDF, GIF
     - 可以是照片或扫描件
   
   - **statement_id**: （可选）账单ID
     - 如果知道是哪个账单的单据，填入账单ID
     - 如果不知道，可以先不填，后续再关联
   
   - **document_type**: （可选）单据类型
     - 选择：`Merchant Slip`（刷卡收据）
     - 或：`Payment Receipt`（付款单）
     - 或：`Transfer Slip`（转账单）
     - 如果不选，默认是 `Statement`

3. **点击 "Execute"**（执行）

4. **查看结果**
   - 系统会返回单据ID
   - 显示上传成功的信息

---

## 📋 使用场景

### 场景1：上传刷卡收据

**情况：** 客户刷卡消费，小助理收到刷卡收据（照片）

**操作：**
1. 打开浏览器 → `http://localhost:8000/docs`
2. 找到 `POST /api/documents/upload`
3. 选择收据照片
4. 选择单据类型：`Merchant Slip`
5. 如果知道账单ID，填写账单ID
6. 上传

### 场景2：上传付款单

**情况：** 客户付款后，小助理收到付款单

**操作：**
1. 拍照或扫描付款单
2. 通过API上传
3. 选择单据类型：`Payment Receipt`
4. 关联到对应的账单

### 场景3：上传转账单

**情况：** 客户通过银行转账付款，小助理收到转账单截图

**操作：**
1. 上传转账单图片
2. 选择单据类型：`Transfer Slip`
3. 关联到账单

---

## 🔍 查看已上传的单据

### 查看所有单据

访问：`http://localhost:8000/api/documents`

或通过API文档：`GET /api/documents`

**可以筛选：**
- 按账单ID：`?statement_id=1`
- 按单据类型：`?document_type=Merchant Slip`

### 查看单个单据详情

访问：`http://localhost:8000/api/documents/{document_id}`

### 下载单据

访问：`http://localhost:8000/api/documents/{document_id}/download`

---

## 📊 单据类型说明

| 单据类型 | 说明 | 使用场景 |
|---------|------|---------|
| **Merchant Slip** | 刷卡收据 | 客户刷卡消费的收据 |
| **Payment Receipt** | 付款单 | 客户付款的收据 |
| **Transfer Slip** | 转账单 | 银行转账的单据 |
| **Statement** | 账单 | 信用卡账单（通常用PDF上传） |

---

## 💡 提示

1. **不知道账单ID怎么办？**
   - 可以先上传单据（不填 statement_id）
   - 后续可以通过查看账单列表找到对应的账单ID
   - 或者等iPad App开发完成后，会有更便捷的关联方式

2. **可以上传多个单据吗？**
   - 可以！每次上传一个单据
   - 可以多次上传，关联到同一个账单

3. **支持什么格式？**
   - 图片：JPG, JPEG, PNG, GIF
   - PDF：PDF文件

4. **单据保存在哪里？**
   - 保存在服务器的 `uploads/documents/` 目录
   - 可以通过API查看和下载

---

## 📱 未来iPad App功能

等iPad App开发完成后，小助理可以：
- 📸 **直接拍照上传** - 用iPad相机拍照，直接上传
- 📁 **从相册选择** - 从iPad相册选择图片上传
- 🔗 **自动关联** - 系统自动识别并关联到对应的账单
- 👁️ **在账单页面查看** - 在账单详情页面直接查看所有相关单据
- 📊 **批量上传** - 一次上传多个单据

---

## ✅ 功能特点

- ✅ 支持多种文件格式（图片、PDF）
- ✅ 可以关联到账单
- ✅ 可以按类型分类
- ✅ 可以查看和下载
- ✅ 可以删除
- ✅ 记录上传日期
- ✅ 支持OCR识别（未来功能）

---

## 🎯 总结

**小助理现在可以通过浏览器上传单据了！**

**步骤：**
1. 打开 `http://localhost:8000/docs`
2. 找到 `POST /api/documents/upload`
3. 选择文件，填写信息
4. 上传

**就这么简单！** 📎✨
